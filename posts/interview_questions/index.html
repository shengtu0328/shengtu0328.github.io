<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Interview_questions - rickyçš„ç½‘ç«™</title><meta name="Description" content="The best time to plant a tree was 10 years ago, the second is now"><meta property="og:title" content="Interview_questions" />
<meta property="og:description" content="javaä»£ç æ‰§è¡Œæµç¨‹ 1 2 3 4 5 6 7 8 public class Main{ public static void main(string[]args){ Student stu=new Student(); stu.study(); stu.hashCode(); stu=null; } } javaæºä»£ç ç¼–è¯‘æˆå­—èŠ‚ç  æ‰§è¡Œ javaå‘½ä»¤ï¼Œå°±ä¼šåˆ›å»ºjavaè™šæ‹Ÿæœº åˆ›å»ºäº†ä¸€" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://shengtu0328.github.io/posts/interview_questions/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-03T09:32:04+08:00" />
<meta property="article:modified_time" content="2023-08-03T09:32:04+08:00" /><meta property="og:site_name" content="æˆ‘çš„ç½‘ç«™" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Interview_questions"/>
<meta name="twitter:description" content="javaä»£ç æ‰§è¡Œæµç¨‹ 1 2 3 4 5 6 7 8 public class Main{ public static void main(string[]args){ Student stu=new Student(); stu.study(); stu.hashCode(); stu=null; } } javaæºä»£ç ç¼–è¯‘æˆå­—èŠ‚ç  æ‰§è¡Œ javaå‘½ä»¤ï¼Œå°±ä¼šåˆ›å»ºjavaè™šæ‹Ÿæœº åˆ›å»ºäº†ä¸€"/>
<meta name="application-name" content="æˆ‘çš„ç½‘ç«™">
<meta name="apple-mobile-web-app-title" content="æˆ‘çš„ç½‘ç«™"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://shengtu0328.github.io/posts/interview_questions/" /><link rel="prev" href="https://shengtu0328.github.io/posts/english_writing_daily_003/" /><link rel="next" href="https://shengtu0328.github.io/posts/spring_session/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Interview_questions",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/shengtu0328.github.io\/posts\/interview_questions\/"
        },"genre": "posts","wordcount":  7619 ,
        "url": "https:\/\/shengtu0328.github.io\/posts\/interview_questions\/","datePublished": "2023-08-03T09:32:04+08:00","dateModified": "2023-08-03T09:32:04+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "ricky"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="rickyçš„ç½‘ç«™">Rickyâ€™s blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="rickyçš„ç½‘ç«™">Rickyâ€™s blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Interview_questions</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>ricky</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-08-03">2023-08-03</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;7619 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;16 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#javaä»£ç æ‰§è¡Œæµç¨‹">javaä»£ç æ‰§è¡Œæµç¨‹</a></li>
        <li><a href="#ç±»åŠ è½½æ‰§è¡Œæµç¨‹">ç±»åŠ è½½æ‰§è¡Œæµç¨‹</a>
          <ul>
            <li><a href="#1åŠ è½½">1.åŠ è½½</a></li>
            <li><a href="#2é“¾æ¥å­—èŠ‚ç å±‚é¢çš„å‡†å¤‡å·¥ä½œ">2.é“¾æ¥ï¼ˆå­—èŠ‚ç å±‚é¢çš„å‡†å¤‡å·¥ä½œï¼‰</a></li>
            <li><a href="#3åˆå§‹åŒ–">3.åˆå§‹åŒ–</a></li>
          </ul>
        </li>
        <li><a href="#javaçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€">javaçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€</a></li>
        <li><a href="#åŒäº²å§”æ´¾">åŒäº²å§”æ´¾</a></li>
        <li><a href="#classloaderçš„åŸç†">ClassLoaderçš„åŸç†</a></li>
        <li><a href="#å­—èŠ‚ç -iiå’Œii-çš„é—®é¢˜">å­—èŠ‚ç  i=i++å’Œi=++i çš„é—®é¢˜</a></li>
        <li><a href="#æ–¹æ³•åŒºæœ‰å“ªå‡ éƒ¨åˆ†">æ–¹æ³•åŒºæœ‰å“ªå‡ éƒ¨åˆ†</a></li>
        <li><a href="#æ ˆå†…å­˜æœ‰å“ªå‡ éƒ¨åˆ†">æ ˆå†…å­˜æœ‰å“ªå‡ éƒ¨åˆ†</a></li>
        <li><a href="#clint-å’Œ-ä¸åŒ…æ‹¬initæ–¹æ³•">clint å’Œ ä¸åŒ…æ‹¬initæ–¹æ³•</a></li>
        <li><a href="#aopæœ‰å‡ ç§å®ç°">AOPæœ‰å‡ ç§å®ç°</a></li>
        <li><a href="#ä»£ç†åˆ›å»ºæ—¶æœº">ä»£ç†åˆ›å»ºæ—¶æœº</a>
          <ul>
            <li><a href="#ä»£ç å‚è€ƒ">ä»£ç å‚è€ƒ</a></li>
            <li><a href="#æ”¶è·">æ”¶è·ğŸ’¡</a></li>
          </ul>
        </li>
        <li><a href="#çº¿ä¸Šæ¥å£å“åº”æ…¢æ€ä¹ˆæ’æŸ¥">çº¿ä¸Šæ¥å£å“åº”æ…¢æ€ä¹ˆæ’æŸ¥</a></li>
        <li><a href="#oauth2">Oauth2</a></li>
        <li><a href="#gcè°ƒä¼˜">GCè°ƒä¼˜</a></li>
        <li><a href="#redisä¸»ä»åŒæ­¥">redisä¸»ä»åŒæ­¥</a></li>
        <li><a href="#redisè„‘è£‚">redisè„‘è£‚</a></li>
        <li><a href="#synchronized">synchronized</a></li>
        <li><a href="#javaå¯¹è±¡å¤´-markword">javaå¯¹è±¡å¤´ MarkWord</a></li>
        <li><a href="#æŸ¥çœ‹æ—¥å¿—å‘½ä»¤">æŸ¥çœ‹æ—¥å¿—å‘½ä»¤</a></li>
        <li><a href="#è¯¥æ€ä¹ˆå¯¹æ¯”é€‰æ‹©mq">è¯¥æ€ä¹ˆå¯¹æ¯”é€‰æ‹©MQ</a></li>
        <li><a href="#elasticsearchçš„ç‰¹ç‚¹ä¼˜ç‚¹-ä¸ºä»€ä¹ˆæ¯”mysqlå¿«">Elasticsearchçš„ç‰¹ç‚¹/ä¼˜ç‚¹ ä¸ºä»€ä¹ˆæ¯”MySQLå¿«ï¼Ÿ</a></li>
        <li><a href="#ä¸ºä»€ä¹ˆè¯´mysqlå•è¡¨è¡Œæ•°ä¸è¦è¶…è¿‡2000w">ä¸ºä»€ä¹ˆè¯´MySQLå•è¡¨è¡Œæ•°ä¸è¦è¶…è¿‡2000w?</a></li>
        <li><a href="#concurrenthashmap">ConcurrentHashMap</a>
          <ul>
            <li><a href="#putæ–¹æ³•">putæ–¹æ³•</a></li>
            <li><a href="#transferæ–¹æ³•">transferæ–¹æ³•</a></li>
          </ul>
        </li>
        <li><a href="#é¡¹ç›®äº®ç‚¹">é¡¹ç›®äº®ç‚¹</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h3 id="javaä»£ç æ‰§è¡Œæµç¨‹">javaä»£ç æ‰§è¡Œæµç¨‹</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="jvm.png"
        data-srcset="jvm.png, jvm.png 1.5x, jvm.png 2x"
        data-sizes="auto"
        alt="jvm.png"
        title="jvm.png" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">public class Main{
</span></span><span class="line"><span class="cl">    public static void main(string[]args){
</span></span><span class="line"><span class="cl">    Student stu=new Student();
</span></span><span class="line"><span class="cl">    stu.study();
</span></span><span class="line"><span class="cl">    stu.hashCode();
</span></span><span class="line"><span class="cl">    stu=null;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>
<p>javaæºä»£ç ç¼–è¯‘æˆ<strong>å­—èŠ‚ç </strong></p>
</li>
<li>
<p>æ‰§è¡Œ javaå‘½ä»¤ï¼Œå°±ä¼šåˆ›å»ºjava<strong>è™šæ‹Ÿæœº</strong></p>
<p>åˆ›å»ºäº†ä¸€ä¸ªmain ä¸»<strong>çº¿ç¨‹</strong>ï¼Œä»jvmè™šæ‹Ÿæœºæ ˆåˆ†é…<strong>æ ˆå†…å­˜</strong>,</p>
<p>æ–¹æ³•ä¸­çš„<strong>å±€éƒ¨å˜é‡ï¼Œå¯¹è±¡å¼•ç”¨</strong> å’Œ<strong>æ–¹æ³•å‚æ•°</strong>å’Œä¹Ÿéƒ½ä¼šå­˜å‚¨åœ¨çº¿ç¨‹å†…æ ˆå†…å­˜</p>
</li>
<li>
<p>å‘ç°äº†æ²¡æœ‰åŠ è½½è¿‡çš„ç±»ï¼Œ<strong>ç±»åŠ è½½å™¨</strong>å°±ä¼šä»<strong>æ–¹æ³•åŒº</strong>åŠ è½½ç±»<strong>å­—èŠ‚ç ä¿¡æ¯</strong>(ç±»é‡Œçš„æˆå‘˜å˜é‡ï¼Œæ–¹æ³•ï¼Œå¼•ç”¨çš„å…¶ä»–ç±»éƒ½ä¼šåœ¨æ–¹æ³•åŒº)</p>
</li>
<li>
<p>åœ¨<strong>å †</strong>å†…å­˜newå¯¹è±¡</p>
</li>
<li>
<p>æ™®é€šjavaæ–¹æ³•ï¼ˆæ ˆï¼‰</p>
<p>æœ¬åœ°æ–¹æ³•ï¼ˆhashcodeï¼Œwaitï¼Œnotifyï¼‰</p>
</li>
<li>
<p>çº¿ç¨‹åˆ‡æ¢ï¼Œç”¨ç¨‹åºè®¡æ•°å™¨è®°å½•ä»£ç æ‰§è¡Œè¡Œæ•°</p>
</li>
<li>
<p>ä¸å†ä½¿ç”¨ ä¼šè¢« <strong>åƒåœ¾å›æ”¶</strong></p>
</li>
<li>
<p><strong>è§£é‡Šå™¨</strong>å°†å­—èŠ‚ç ç¿»è¯‘æˆæœºå™¨ç </p>
</li>
<li>
<p><strong>JITå³æ—¶ç¼–è¯‘å™¨</strong>è´Ÿè´£çƒ­ç‚¹ä»£ç </p>
</li>
</ol>
<p>æ¯ä¸€ä¸ªç±»éƒ½æœ‰è‡ªå·±çš„å¸¸é‡æ± ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æœ‰è‡ªå·±çš„å±€éƒ¨å˜é‡è¡¨</p>
<h3 id="ç±»åŠ è½½æ‰§è¡Œæµç¨‹">ç±»åŠ è½½æ‰§è¡Œæµç¨‹</h3>
<h4 id="1åŠ è½½">1.åŠ è½½</h4>
<ol>
<li>
<p>å°†ç±»çš„å­—èŠ‚ç è½½å…¥æ–¹æ³•åŒºï¼Œå¹¶åˆ›å»ºç±».classå¯¹è±¡</p>
</li>
<li>
<p>å¦‚æœæ­¤ç±»çš„çˆ¶ç±»æ²¡æœ‰åŠ è½½ï¼Œå…ˆåŠ è½½çˆ¶ç±»</p>
</li>
<li>
<p>ç±»åŠ è½½æ˜¯æ‡’æƒ°çš„, é¦–æ¬¡ç”¨åˆ°æ—¶æ‰åŠ è½½</p>
</li>
</ol>
<p>ä»¥ä¸‹å‡ ç§æ–¹å¼ä¼šå¯¼è‡´ç±»çš„åŠ è½½ï¼š</p>
<ol>
<li>ä½¿ç”¨äº†ç±».class    (ç±»å¯¹è±¡å­˜åœ¨äºå †)</li>
<li>ç”¨ç±»åŠ è½½å™¨çš„ loadClass æ–¹æ³•åŠ è½½ç±»</li>
</ol>
<h4 id="2é“¾æ¥å­—èŠ‚ç å±‚é¢çš„å‡†å¤‡å·¥ä½œ">2.é“¾æ¥ï¼ˆå­—èŠ‚ç å±‚é¢çš„å‡†å¤‡å·¥ä½œï¼‰</h4>
<ol>
<li>
<p>éªŒè¯-éªŒè¯ç±»æ˜¯å¦ç¬¦åˆClassè§„èŒƒï¼Œåˆæ³•æ€§ã€å®‰å…¨æ€§æ£€æŸ¥</p>
</li>
<li>
<p>å‡†å¤‡-ä¸ºstaticå˜é‡åˆ†é…ç©ºé—´ï¼Œè®¾ç½®é»˜è®¤å€¼ï¼Œ</p>
<p>å¦‚æœæ˜¯finalä¿®é¥°çš„åŸºæœ¬ç±»å‹çš„staticå˜é‡ ä¼šç›´æ¥èµ‹äºˆä»£ç ä¸­é…ç½®çš„å€¼ï¼ˆä¸ä¼šåœ¨ 3.åˆå§‹åŒ– ä¸­æ‰§è¡Œï¼‰ï¼Œ</p>
<p>å¦‚æœä¸æ˜¯finalä¿®é¥°çš„staticå˜é‡ é‚£å°±æ˜¯ç»™å˜é‡åˆ†é…å¯¹åº”ç±»å‹çš„é»˜è®¤å€¼</p>
</li>
<li>
<p>è§£æ-å°†å¸¸é‡æ± çš„ç¬¦å·å¼•ç”¨è§£æä¸ºç›´æ¥å¼•ç”¨ ï¼ˆæ˜¯ä¸€æ­¥ä¸€æ­¥è§£æçš„ï¼Œè¿è¡Œçš„æ—¶å€™å“ªé‡Œç”¨åˆ°äº†æŸä¸ªå¯¹è±¡ï¼Œæ‰§è¡Œåˆ°è¿™ä¸€æ­¥çš„æ—¶å€™å†å»è§£æï¼‰</p>
</li>
</ol>
<h4 id="3åˆå§‹åŒ–">3.åˆå§‹åŒ–</h4>
<ol>
<li>
<p>æ‰§è¡Œé™æ€ä»£ç å—ä¸éfinalé™æ€å˜é‡çš„èµ‹å€¼</p>
<p>ä»€ä¹ˆæ˜¯ clinitæ–¹æ³•ï¼ˆç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼‰ï¼Ÿ</p>
<ol>
<li>( éfinalä¿®é¥°çš„é™æ€å˜é‡ + finalä¿®é¥°çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡ + é™æ€ä»£ç å—ï¼‰ æŒ‰ç…§å®ƒä»¬åœ¨ä»£ç ä¸­ç¼–å†™çš„é¡ºåº è‡ªä¸Šåˆ°ä¸‹å†™å…¥åˆ° å­—èŠ‚ç ä¸­ clinitæ–¹æ³•å½“ä¸­</li>
</ol>
</li>
<li>
<p>åˆ‡å§‹åŒ–æ˜¯èµ–æƒ°æ‰§è¡Œ</p>
</li>
</ol>
<p>ä»¥ä¸‹å‡ ç§æ–¹å¼ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–ï¼š</p>
<ol>
<li>é¦–æ¬¡è®¿é—®é™æ€æ–¹æ³•æˆ–é™æ€å˜é‡(é final, æˆ– finalçš„ å¼•ç”¨ç±»å‹)æˆ–è€…é™æ€æ–¹æ³•</li>
<li>newä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡æ—¶ã€‚</li>
<li>è°ƒç”¨Class.forName(String className)ã€‚</li>
<li>æ‰§è¡ŒMainæ–¹æ³•çš„å½“å‰ç±»ã€‚</li>
<li>new, clone, ååºåˆ—åŒ–æ—¶</li>
</ol>
<h3 id="javaçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€">javaçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="os.thread.state.png"
        data-srcset="os.thread.state.png, os.thread.state.png 1.5x, os.thread.state.png 2x"
        data-sizes="auto"
        alt="os.thread.state.png"
        title="os.thread.state.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="Thread.State.png"
        data-srcset="Thread.State.png, Thread.State.png 1.5x, Thread.State.png 2x"
        data-sizes="auto"
        alt="Thread.State.png"
        title="Thread.State.png" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">import lombok.extern.slf4j.Slf4j;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import java.io.IOException;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@Slf4j(topic = &#34;c.TestState&#34;)
</span></span><span class="line"><span class="cl">public class TestState {
</span></span><span class="line"><span class="cl">    public static void main(String[] args) throws IOException {
</span></span><span class="line"><span class="cl">        Thread t1 = new Thread(&#34;t1&#34;) {
</span></span><span class="line"><span class="cl">            @Override
</span></span><span class="line"><span class="cl">            public void run() {
</span></span><span class="line"><span class="cl">                log.debug(&#34;running...&#34;);
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        };
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        Thread t2 = new Thread(&#34;t2&#34;) {
</span></span><span class="line"><span class="cl">            @Override
</span></span><span class="line"><span class="cl">            public void run() {
</span></span><span class="line"><span class="cl">                while(true) { // runnable
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        };
</span></span><span class="line"><span class="cl">        t2.start();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        Thread t3 = new Thread(&#34;t3&#34;) {
</span></span><span class="line"><span class="cl">            @Override
</span></span><span class="line"><span class="cl">            public void run() {
</span></span><span class="line"><span class="cl">                log.debug(&#34;running...&#34;);
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        };
</span></span><span class="line"><span class="cl">        t3.start();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        Thread t4 = new Thread(&#34;t4&#34;) {
</span></span><span class="line"><span class="cl">            @Override
</span></span><span class="line"><span class="cl">            public void run() {
</span></span><span class="line"><span class="cl">                synchronized (TestState.class) {
</span></span><span class="line"><span class="cl">                    try {
</span></span><span class="line"><span class="cl">                        Thread.sleep(1000000); // timed_waiting
</span></span><span class="line"><span class="cl">                    } catch (InterruptedException e) {
</span></span><span class="line"><span class="cl">                        e.printStackTrace();
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        };
</span></span><span class="line"><span class="cl">        t4.start();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        Thread t5 = new Thread(&#34;t5&#34;) {
</span></span><span class="line"><span class="cl">            @Override
</span></span><span class="line"><span class="cl">            public void run() {
</span></span><span class="line"><span class="cl">                try {
</span></span><span class="line"><span class="cl">                    t2.join(); // waiting
</span></span><span class="line"><span class="cl">                } catch (InterruptedException e) {
</span></span><span class="line"><span class="cl">                    e.printStackTrace();
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        };
</span></span><span class="line"><span class="cl">        t5.start();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        Thread t6 = new Thread(&#34;t6&#34;) {
</span></span><span class="line"><span class="cl">            @Override
</span></span><span class="line"><span class="cl">            public void run() {
</span></span><span class="line"><span class="cl">                synchronized (TestState.class) { // blocked
</span></span><span class="line"><span class="cl">                    try {
</span></span><span class="line"><span class="cl">                        Thread.sleep(1000000);
</span></span><span class="line"><span class="cl">                    } catch (InterruptedException e) {
</span></span><span class="line"><span class="cl">                        e.printStackTrace();
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        };
</span></span><span class="line"><span class="cl">        t6.start();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        try {
</span></span><span class="line"><span class="cl">            Thread.sleep(500);
</span></span><span class="line"><span class="cl">        } catch (InterruptedException e) {
</span></span><span class="line"><span class="cl">            e.printStackTrace();
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">        log.debug(&#34;t1 state {}&#34;, t1.getState());
</span></span><span class="line"><span class="cl">        log.debug(&#34;t2 state {}&#34;, t2.getState());
</span></span><span class="line"><span class="cl">        log.debug(&#34;t3 state {}&#34;, t3.getState());
</span></span><span class="line"><span class="cl">        log.debug(&#34;t4 state {}&#34;, t4.getState());
</span></span><span class="line"><span class="cl">        log.debug(&#34;t5 state {}&#34;, t5.getState());
</span></span><span class="line"><span class="cl">        log.debug(&#34;t6 state {}&#34;, t6.getState());
</span></span><span class="line"><span class="cl">        System.in.read();
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">10:03:16.549 c.TestState [t3] - running...
</span></span><span class="line"><span class="cl">10:03:17.064 c.TestState [main] - t1 state NEW
</span></span><span class="line"><span class="cl">10:03:17.065 c.TestState [main] - t2 state RUNNABLE
</span></span><span class="line"><span class="cl">10:03:17.065 c.TestState [main] - t3 state TERMINATED
</span></span><span class="line"><span class="cl">10:03:17.065 c.TestState [main] - t4 state TIMED_WAITING
</span></span><span class="line"><span class="cl">10:03:17.065 c.TestState [main] - t5 state WAITING
</span></span><span class="line"><span class="cl">10:03:17.065 c.TestState [main] - t6 state BLOCKED
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åŒäº²å§”æ´¾">åŒäº²å§”æ´¾</h3>
<p>åœ¨ç±»åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªç±»åŠ è½½å™¨éƒ½ä¼šå…ˆæ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½äº†è¯¥ç±»ï¼Œå¦‚æœå·²ç»åŠ è½½åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™ä¼šå°†åŠ è½½è¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨ã€‚</p>
<p>å¦‚æœæ‰€æœ‰çš„çˆ¶ç±»åŠ è½½å™¨éƒ½æ— æ³•åŠ è½½è¯¥ç±»ï¼Œåˆ™ç”±å½“å‰ç±»åŠ è½½å™¨è‡ªå·±å°è¯•åŠ è½½ã€‚æ‰€ä»¥çœ‹ä¸Šå»æ˜¯è‡ªé¡¶å‘ä¸‹å°è¯•åŠ è½½</p>
<p>ç¬¬äºŒæ¬¡å†å»åŠ è½½ç›¸åŒçš„ç±»ï¼Œä»ç„¶ä¼šå‘ä¸Šè¿›è¡Œå§”æ´¾ï¼Œå¦‚æœæŸä¸ªç±»åŠ è½½å™¨åŠ è½½è¿‡å°±ä¼šç›´æ¥è¿”å›</p>
<p><strong>1.ä¿è¯ç±»åŠ è½½çš„å®‰å…¨æ€§</strong></p>
<p>é€šè¿‡åŒäº²å§”æ´¾æœºåˆ¶ï¼Œè®©é¡¶å±‚çš„ç±»åŠ </p>
<p>è½½å™¨å»åŠ è½½æ ¸å¿ƒç±»ï¼Œé¿å…æ¶æ„ä»£ç </p>
<p>æ›¿æ¢JDKä¸­çš„æ ¸å¿ƒç±»åº“ï¼Œæ¯”å¦‚</p>
<p>java.lang.Stringï¼Œç¡®ä¿æ ¸å¿ƒç±»</p>
<p>åº“çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚</p>
<p><strong>2.é¿å…é‡å¤åŠ è½½</strong></p>
<p>åŒäº²å§”æ´¾æœºåˆ¶å¯ä»¥é¿å…åŒä¸€ä¸ªç±»è¢«</p>
<p>å¤šæ¬¡åŠ è½½ï¼Œä¸Šå±‚çš„ç±»åŠ è½½å™¨å¦‚æœåŠ </p>
<p>è½½è¿‡ç±»ï¼Œå°±ä¼šç›´æ¥è¿”å›è¯¥ç±»ï¼Œé¿å…</p>
<p>é‡å¤åŠ è½½ã€‚</p>
<h3 id="classloaderçš„åŸç†">ClassLoaderçš„åŸç†</h3>
<p>å…ˆæ¥åˆ†æClassLoaderçš„åŸç†ï¼ŒClassLoaderä¸­åŒ…å«äº†4ä¸ªæ ¸å¿ƒæ–¹æ³•ã€‚</p>
<p>åŒäº²å§”æ´¾æœºåˆ¶çš„æ ¸å¿ƒä»£ç å°±ä½äºloadClassæ–¹æ³•ä¸­</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="ClassLoader.png"
        data-srcset="ClassLoader.png, ClassLoader.png 1.5x, ClassLoader.png 2x"
        data-sizes="auto"
        alt="ClassLoader.png"
        title="ClassLoader.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="ClassLoader_parent.png"
        data-srcset="ClassLoader_parent.png, ClassLoader_parent.png 1.5x, ClassLoader_parent.png 2x"
        data-sizes="auto"
        alt="ClassLoader_parent.png"
        title="ClassLoader_parent.png" /></p>
<h3 id="å­—èŠ‚ç -iiå’Œii-çš„é—®é¢˜">å­—èŠ‚ç  i=i++å’Œi=++i çš„é—®é¢˜</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">public class Demo1 {
</span></span><span class="line"><span class="cl">    public static void main(String[] args) {
</span></span><span class="line"><span class="cl">        int i=0;
</span></span><span class="line"><span class="cl">        i = i++;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        //è¾“å‡º0
</span></span><span class="line"><span class="cl">        System.out.println(i);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">public class Demo1_1 {
</span></span><span class="line"><span class="cl">    public static void main(String[] args) {
</span></span><span class="line"><span class="cl">        int i=0;
</span></span><span class="line"><span class="cl">        i=++i;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        //è¾“å‡º1
</span></span><span class="line"><span class="cl">        System.out.println(i);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="i&#43;&#43;&amp;&#43;&#43;i.png"
        data-srcset="i&#43;&#43;&amp;&#43;&#43;i.png, i&#43;&#43;&amp;&#43;&#43;i.png 1.5x, i&#43;&#43;&amp;&#43;&#43;i.png 2x"
        data-sizes="auto"
        alt="i&#43;&#43;&amp;&#43;&#43;i.png"
        title="i&#43;&#43;&amp;&#43;&#43;i.png" /></p>
<h3 id="æ–¹æ³•åŒºæœ‰å“ªå‡ éƒ¨åˆ†">æ–¹æ³•åŒºæœ‰å“ªå‡ éƒ¨åˆ†</h3>
<p>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆä».classæ–‡ä»¶ä¸­çš„å¸¸é‡æ± è€Œæ¥ï¼‰ï¼Œä¸²æ± ï¼Œç›´æ¥å†…å­˜</p>
<h3 id="æ ˆå†…å­˜æœ‰å“ªå‡ éƒ¨åˆ†">æ ˆå†…å­˜æœ‰å“ªå‡ éƒ¨åˆ†</h3>
<p>å±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆ</p>
<h3 id="clint-å’Œ-ä¸åŒ…æ‹¬initæ–¹æ³•">clint å’Œ ä¸åŒ…æ‹¬initæ–¹æ³•</h3>
<h3 id="aopæœ‰å‡ ç§å®ç°">AOPæœ‰å‡ ç§å®ç°</h3>
<p>æœ‰ä¸‰ç§aopçš„å®ç°</p>
<ol>
<li>
<p>aspectjå®ç° æ˜¯åœ¨ ç¼–è¯‘æ—¶äº§ç”Ÿä¿®æ”¹åŸæ¥çš„ç±»</p>
</li>
<li>
<p>agentå®ç° æ˜¯åœ¨ ç±»åŠ è½½æ—¶äº§ç”Ÿä¿®æ”¹åŸæ¥çš„ç±»</p>
</li>
<li>
<p>proxyå®ç° æ˜¯ åŠ¨æ€ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„ä»£ç†ç±»ï¼Œå‰ä¸¤ç§æ²¡æœ‰ç”Ÿæˆæ–°çš„ç±»</p>
<p>æ™®é€šç±»æ˜¯é€šè¿‡ A.java-&gt;A.class-&gt;ç±»åŠ è½½</p>
<p>proxyä»£ç†æ˜¯  æ²¡æœ‰.javaçš„ç¬¬ä¸€æ­¥   A$proxy.class-&gt;ç±»åŠ è½½</p>
</li>
</ol>
<p><strong>JDKå®ç°</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">public class AopJdkProxyTest {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    /**
</span></span><span class="line"><span class="cl">     * jdkçš„åŠ¨æ€ä»£ç†ï¼Œåªèƒ½é’ˆå¯¹æ¥å£ä»£ç†
</span></span><span class="line"><span class="cl">     * æ€»ç»“ï¼šä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡æ˜¯å…„å¼Ÿå…³ç³»ï¼Œéƒ½ç»§æ‰¿äº†Fooæ¥å£ï¼Œä»£ç†å¯¹è±¡ç±»å‹ä¸èƒ½å¼ºè½¬æˆç›®æ ‡å¯¹è±¡ç±»å‹ã€‚
</span></span><span class="line"><span class="cl">     *
</span></span><span class="line"><span class="cl">     * jdkçš„ä»£ç†ç±»å¯ä»¥æ˜¯finalç±»å‹
</span></span><span class="line"><span class="cl">     */
</span></span><span class="line"><span class="cl">    @Test
</span></span><span class="line"><span class="cl">    public void testJdkProxy() throws IOException {
</span></span><span class="line"><span class="cl">        // ç›®æ ‡å¯¹è±¡
</span></span><span class="line"><span class="cl">        Target target = new Target();
</span></span><span class="line"><span class="cl">        // ç”¨æ¥åŠ è½½åœ¨è¿è¡ŒæœŸé—´åŠ¨æ€ç”Ÿæˆçš„å­—èŠ‚ç 
</span></span><span class="line"><span class="cl">        ClassLoader loader = AopJdkProxyTest.class.getClassLoader();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        // å‚æ•°1: ç±»åŠ è½½å™¨åŠ è½½è¿è¡Œæ—¶æœŸç”Ÿæˆçš„å­—èŠ‚ç 
</span></span><span class="line"><span class="cl">        // å‚æ•°2: ä»£ç†ç±»è¦å®ç°å“ªä¸ªæ¥å£ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„
</span></span><span class="line"><span class="cl">        // å‚æ•°3ï¼šInvocationHandlerç±»ï¼Œå…·ä½“çš„ä»£ç†ç±»æ–¹æ³•çš„å®ç°
</span></span><span class="line"><span class="cl">        // ä»£ç†ç±»æ˜¯å®ç°Fooæ¥å£çš„ï¼Œæ‰€ä»¥å¯ä»¥è¿”å›æ¥å£ç±»å‹
</span></span><span class="line"><span class="cl">        Foo fooProxy = (Foo) Proxy.newProxyInstance(
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                loader,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                new Class[]{Foo.class},
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // å‚æ•°1: ä»£ç†å¯¹è±¡è‡ªå·±
</span></span><span class="line"><span class="cl">                // å‚æ•°2ï¼šæ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å¯¹è±¡
</span></span><span class="line"><span class="cl">                // å‚æ•°3ï¼šæ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å‚æ•°
</span></span><span class="line"><span class="cl">                (proxy, method, args) -&gt; {
</span></span><span class="line"><span class="cl">                    System.out.println(&#34;before...&#34;);
</span></span><span class="line"><span class="cl">                    //è¿™ä¸ªæ–¹æ³•åœ¨å“ªä¸ªç›®æ ‡å¯¹è±¡ä¸Šè¢«æ‰§è¡Œ+å‚æ•° ã€‚åå°„è°ƒç”¨
</span></span><span class="line"><span class="cl">                    Object result = method.invoke(target, args);
</span></span><span class="line"><span class="cl">                    System.out.println(&#34;after...&#34;);
</span></span><span class="line"><span class="cl">                    return result;  // è®©ä»£ç†ä¹Ÿè¿”å›ç›®æ ‡æ–¹æ³•æ‰§è¡Œçš„ç»“æœ
</span></span><span class="line"><span class="cl">                });
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        System.out.println(fooProxy.getClass());
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        fooProxy.foo();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        System.in.read();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">interface Foo {
</span></span><span class="line"><span class="cl">    void foo();
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@Slf4j
</span></span><span class="line"><span class="cl">final class Target implements Foo {
</span></span><span class="line"><span class="cl">    @Override
</span></span><span class="line"><span class="cl">    public void foo() {
</span></span><span class="line"><span class="cl">        log.debug(&#34;target foo&#34;);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>jdkçš„ç›®æ ‡ç±»å¯ä»¥æ˜¯finalç±»å‹</li>
<li>jdkçš„åŠ¨æ€ä»£ç†ï¼Œåªèƒ½é’ˆå¯¹æ¥å£ä»£ç†ï¼Œç›®æ ‡ç±»å¿…é¡»å®ç°æ¥å£</li>
<li>jdk ä»£ç†ç±» å’Œ ç›®æ ‡ç±»æ˜¯ å…„å¼Ÿå…³ç³»</li>
<li>Object result = method.invoke(target, args); åå°„æ–¹æ³•è°ƒç”¨</li>
<li>åŸç†æ˜¯asmï¼Œåœ¨è¿è¡ŒæœŸé—´åŠ¨æ€ç”Ÿæˆå­—èŠ‚ç ï¼Œç”¨javaä»£ç ç”Ÿæˆä¸€ä¸ªç±»ï¼Œä¸»è¦æ˜¯æœ‰ä¸€ä¸ªClassWriter</li>
<li>åå°„åœ¨å¤šæ¬¡è°ƒç”¨åï¼Œå®ç°ç±»ä¼šæœ‰ä¼˜åŒ–  javaæœ¬åœ°ä»£ç -&gt;ç¬¬17æ¬¡è°ƒç”¨å˜æˆæ­£å¸¸è°ƒç”¨ ç±».é™æ€æ–¹æ³•  ï¼ˆä»£ä»·æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„ä»£ç†ç±».ï¼‰</li>
<li>ä¸€ä¸ªæ–¹æ³•è°ƒç”¨å°±ç”Ÿæˆä¸€ä¸ªä»£ç†</li>
</ol>
<p><strong>cglibå®ç°</strong></p>
<ol>
<li>
<p>cglibçš„ç›®æ ‡ç±»ä¸å¯ä»¥æ˜¯finalç±»å‹(å¦‚æœæ˜¯final ä¼šæŠ¥é”™)ï¼Œæ–¹æ³•ä¹Ÿä¸èƒ½ç”¨finalä¿®é¥°</p>
</li>
<li>
<p>cglib ä»£ç†ç±»æ˜¯å­ç±»å‹ ï¼Œç›®æ ‡ç±»æ˜¯çˆ¶ç±»å‹</p>
</li>
<li>
<p>Object result = proxy.invoke(target, args); // é¿å…åå°„æ•ˆç‡é«˜ï¼Œéœ€è¦ä¼ ç›®æ ‡ç±» ï¼ˆspringç”¨çš„æ˜¯è¿™ç§ï¼‰</p>
</li>
<li>
<p>cglib å’Œjdk çš„åŒºåˆ«</p>
<p>cglibä¸€ä¸Šæ¥å°±ç”Ÿæˆä»£ç†ç±»ï¼Œä¸€ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•ä»£ç†å°±åªä¼šç”Ÿæˆä¸¤ä¸ªä»£ç†ç±»</p>
<p>ä¸»è¦æ˜¯åœ¨  MethodProxy  ä¸ç»è¿‡åå°„è°ƒç”¨æ–¹æ³•  save1Proxy = MethodProxy.create(Target.class, Proxy.class, &ldquo;(I)V&rdquo;, &ldquo;save&rdquo;, &ldquo;saveSuper&rdquo;);</p>
<p>ä¸‹é¢ä¸¤ä¸ª æ˜¯ç”¨äº†   FastClass å®ç°æ— åå°„ 
return   methodProxy.invoke( target,p);  //æ— åå°„è°ƒç”¨ï¼Œéœ€è¦ä»£ç†ç±»
return methodProxy.invoke(target, args);  //æ— åå°„è°ƒç”¨ï¼Œéœ€è¦Targetç±»  ï¼Œargsæ˜¯æ–¹æ³•å‚æ•°</p>
<p>ç”¨ä¸€å¥è¯æ¥è¯´ å°±æ˜¯ cglibä¼šå½“è°ƒç”¨ MethodProxy çš„ invoke æˆ– invokeSuper æ–¹æ³•æ—¶, ä¼šåŠ¨æ€ç”Ÿæˆä¸¤ä¸ªç±»ï¼ŒæœŸä¸­ä¸€ä¸ªæ–¹å¼å«getindexï¼Œé‡Œé¢è®°å½•äº†ç›®æ ‡æ–¹æ³•ä¸”ä¸ä¸‹æ ‡åšæ˜ å°„ï¼Œå¦ä¸€ä¸ªå°±æ˜¯   public Object invoke(int index, Object proxy, Object[] args)  æ ¹æ®æ–¹æ³•ç¼–å·, æ­£å¸¸è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•   ã€‚</p>
<p>//           åœ¨è°ƒç”¨çš„æ—¶å€™è°ƒç”¨äº†   è¿™ä¸ª invokeæ–¹æ³•é¿å…äº†åå°„</p>
<p>//              return   methodProxy.invoke( target,p);  //æ— åå°„è°ƒç”¨ï¼Œéœ€è¦ä»£ç†ç±»
return methodProxy.invoke(target, args);  //æ— åå°„è°ƒç”¨ï¼Œéœ€è¦Targetç±»  ï¼Œargsæ˜¯æ–¹æ³•å‚æ•°</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">        Proxy proxy = new Proxy();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        Target target = new Target();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        proxy.setMethodInterceptor(new MethodInterceptor() {
</span></span><span class="line"><span class="cl">            @Override
</span></span><span class="line"><span class="cl">            public Object intercept(Object p, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                System.out.println(&#34;before&#34;);
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">//                return  method.invoke(target,args);   //åå°„è°ƒç”¨
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">//              ä¸‹é¢ä¸¤ä¸ª æ˜¯ç”¨äº†   FastClass å®ç°æ— åå°„ 
</span></span><span class="line"><span class="cl">//              return   methodProxy.invoke( target,p);  //æ— åå°„è°ƒç”¨ï¼Œéœ€è¦ä»£ç†ç±»
</span></span><span class="line"><span class="cl">                return methodProxy.invoke(target, args);  //æ— åå°„è°ƒç”¨ï¼Œéœ€è¦Targetç±»  ï¼Œargsæ˜¯æ–¹æ³•å‚æ•°
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        });
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        proxy.save();
</span></span><span class="line"><span class="cl">        proxy.save(1);
</span></span><span class="line"><span class="cl">        proxy.save(2L);
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>springé€‰æ‹©ä»£ç†</strong></p>
<p>proxyTargetclassé»˜è®¤false</p>
<p>a,proxyTargetclass=false,æœˆæ ‡å®ç°âˆ«æ¥å£ï¼Œç”¨jdkå®ç°
b.proxyTargetClass=false,ç›®æ ‡æ²¡æœ‰å®ç°æ¥I,ç”¨cglibå®ç°
c.proxyTargetclass=trUe,æ€»æ˜¯ä½¿ç”¨cglibå®è·‘</p>
<h3 id="ä»£ç†åˆ›å»ºæ—¶æœº">ä»£ç†åˆ›å»ºæ—¶æœº</h3>
<h4 id="ä»£ç å‚è€ƒ">ä»£ç å‚è€ƒ</h4>
<p><strong>org.springframework.aop.framework.autoproxy.A17_1</strong></p>
<h4 id="æ”¶è·">æ”¶è·ğŸ’¡</h4>
<ol>
<li>ä»£ç†çš„åˆ›å»ºæ—¶æœº
<ul>
<li>åˆå§‹åŒ–ä¹‹å (æ— å¾ªç¯ä¾èµ–æ—¶)  AspectJAwareAdvisorAutoProxyCreator.postProcessAfterInitialization. wrapIfNecessary( )</li>
<li>å®ä¾‹åˆ›å»ºå, ä¾èµ–æ³¨å…¥å‰ (æœ‰å¾ªç¯ä¾èµ–æ—¶), å¹¶æš‚å­˜äºäºŒçº§ç¼“å­˜</li>
</ul>
</li>
</ol>
<h3 id="çº¿ä¸Šæ¥å£å“åº”æ…¢æ€ä¹ˆæ’æŸ¥">çº¿ä¸Šæ¥å£å“åº”æ…¢æ€ä¹ˆæ’æŸ¥</h3>
<ol>
<li>çœ‹æ—¥å¿—ï¼Œæ£€æŸ¥ç›‘æ§ï¼Œåˆ†å¸ƒå¼æœåŠ¡ä¸€èˆ¬éƒ½æ˜¯æœåŠ¡æ²»ç†çš„ï¼Œskywalkingå¯ä»¥çœ‹æ•´ä¸ªè°ƒç”¨é“¾çš„æ—¶é—´å›¾ã€‚æ™®ç½—ç±³ä¿®æ–¯å¯ä»¥æ£€æŸ¥å†…å­˜ï¼Œcpuä½¿ç”¨æƒ…å†µ</li>
<li>å¦‚æœæ˜¯æ•°æ®åº“ï¼Œredisè®¿é—®æ…¢ï¼Œå…ˆæ£€æŸ¥ä¸‹æ˜¯ä¸æ˜¯ç½‘ç»œæ…¢</li>
<li>æ£€æŸ¥ä»£ç  ï¼Œæ˜¯å¦æœ‰é”ç«äº‰ï¼Œio æ“ä½œ</li>
<li>ç¡®è®¤JVMé…ç½®</li>
<li>å¯¹dumpçš„å †å†…å­˜æ–‡ä»¶è¿›è¡Œåˆ†æ, æœ‰æ²¡æœ‰å¤§å¯¹è±¡</li>
<li>å¦‚æœæ˜¯æ•°æ®åº“è®¿é—®æ…¢ï¼Œé‚£ä¹ˆå°±è¦çœ‹æ˜¯ä¸æ˜¯æœ‰é”è¡¨çš„æƒ…å†µã€æ˜¯ä¸æ˜¯æœ‰å…¨è¡¨æ‰«æã€ç´¢å¼•åŠ å¾—æ˜¯å¦åˆé€‚ã€æ˜¯å¦æœ‰JOINæ“ä½œã€éœ€ä¸éœ€è¦åŠ ç¼“å­˜ï¼Œæ•°æ®åº“è¿æ¥æœ‰æ²¡æœ‰ç”¨å®Œ</li>
<li>rocketmq é‡Œæœ‰æ²¡æœ‰æ¶ˆæ¯å †ç§¯</li>
<li>é€šè¿‡jstackå·¥å…·å’Œå…¶ä»–æŒ‡ä»¤ï¼Œæ¥å®šä½CPUé£™å‡é—®é¢˜</li>
<li>arthså‘½ä»¤ trace å’Œ ç«ç„°å›¾</li>
</ol>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="oom.png"
        data-srcset="oom.png, oom.png 1.5x, oom.png 2x"
        data-sizes="auto"
        alt="oom.png"
        title="oom.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="%e7%ba%bf%e4%b8%8a%e9%97%ae%e9%a2%98%e6%8e%92%e6%9f%a5.png"
        data-srcset="%e7%ba%bf%e4%b8%8a%e9%97%ae%e9%a2%98%e6%8e%92%e6%9f%a5.png, %e7%ba%bf%e4%b8%8a%e9%97%ae%e9%a2%98%e6%8e%92%e6%9f%a5.png 1.5x, %e7%ba%bf%e4%b8%8a%e9%97%ae%e9%a2%98%e6%8e%92%e6%9f%a5.png 2x"
        data-sizes="auto"
        alt="çº¿ä¸Šé—®é¢˜æ’æŸ¥.png"
        title="çº¿ä¸Šé—®é¢˜æ’æŸ¥.png" /></p>
<h3 id="oauth2">Oauth2</h3>
<p>OAuth æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œè¯¥æ ‡å‡†å…è®¸ç”¨æˆ·è®©ç¬¬ä¸‰æ–¹åº”ç”¨è®¿é—®è¯¥ç”¨æˆ·åœ¨æŸä¸€ç½‘ç«™ä¸Šå­˜å‚¨çš„ç§å¯†èµ„æº ï¼ˆå¦‚å¤´åƒã€ç…§ç‰‡ã€è§†é¢‘ç­‰ï¼‰ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ— é¡»å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚é€šè¿‡ä»¤ç‰Œ ï¼ˆtokenï¼‰ å¯ä»¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚æ¯ä¸€ä¸ªä»¤ç‰Œæˆæƒä¸€ä¸ªç‰¹å®šçš„ç½‘ç«™åœ¨ç‰¹å®šçš„æ—¶é—´æ®µå†…å…è®¸å¯è®¿é—®ç‰¹å®šçš„èµ„æºã€‚OAuth è®©ç”¨æˆ·å¯ä»¥æˆæƒç¬¬ä¸‰æ–¹ç½‘ç«™çµæ´»è®¿é—®å®ƒä»¬å­˜å‚¨åœ¨å¦å¤–ä¸€äº›èµ„æºæœåŠ¡å™¨ä¸Šçš„ç‰¹å®šä¿¡æ¯ï¼Œè€Œéæ‰€æœ‰çš„å†…å®¹ã€‚å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨äº’è”ç½‘åº”ç”¨ä¸­æœ€å¸¸è§çš„ OAuth åº”ç”¨å°±æ˜¯å„ç§ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œä¾‹å¦‚ QQæˆæƒç™»å½•ã€å¾®ä¿¡æˆæƒç™»å½•ã€å¾®åšæˆæƒç™»å½•ã€GitHub æˆæƒç™»å½•ç­‰ã€‚</p>
<h3 id="gcè°ƒä¼˜">GCè°ƒä¼˜</h3>
<ol>
<li>
<p>æ˜¯éœ€è¦ ä½å»¶è¿Ÿ è¿˜æ˜¯ é«˜ååé‡çš„ åƒåœ¾å›æ”¶å™¨ï¼Ÿ</p>
</li>
<li>
<p>ä»£ç é—®é¢˜ï¼šæ˜¯å¦æ•°æ®è¿”å›é‡è¿‡å¤§ï¼Ÿï¼Œå¯ä»¥è¿›è¡Œå¯¹è±¡ç˜¦èº« Integer-intï¼Œæ˜¯å¦æœ‰å†…å­˜æ³„æ¼ï¼Œthreadlocal</p>
</li>
<li>
<p>å…ˆä»æ–°ç”Ÿä»£è°ƒä¼˜ï¼ˆå› ä¸ºæ–°ç”Ÿä»£æ˜¯ç”¨å¤åˆ¶ç®—æ³• é€Ÿåº¦å¿«ï¼Œminor gc è¿œè¿œå°äºfull gcï¼‰</p>
<p>æ–°ç”Ÿä»£å¤ªå°ä¼šé¢‘ç¹å‘ç”Ÿminor gcï¼Œ æ–°ç”Ÿä»£è°ƒå¤§ï¼Œè€å¹´ä»£ç›¸åº”çš„å‡å°‘ä¼šå‘ç”Ÿfullgcã€‚å®˜æ–¹å»ºè®®æ–°ç”Ÿä»£å¤§å°æ§åˆ¶åœ¨æ•´ä¸ªå †çš„ 25%~40% ä¹‹é—´.</p>
<p>æ–°ç”Ÿä»£èƒ½å®¹çº³æ‰€æœ‰ã€å¹¶å‘é‡ * (è¯·æ±‚-å“åº”)ã€‘çš„æ•°æ®</p>
<p>å¹¸å­˜åŒºå¤§åˆ°èƒ½ä¿ç•™ã€å½“å‰æ´»è·ƒå¯¹è±¡+éœ€è¦æ™‹å‡å¯¹è±¡ã€‘</p>
<p>æ™‹å‡é˜ˆå€¼é…ç½®å¾—å½“ï¼Œè®©é•¿æ—¶é—´å­˜æ´»å¯¹è±¡å°½å¿«æ™‹å‡</p>
<p>-XX:MaxTenuringThreshold=threshold</p>
<p>-XX:+PrintTenuringDistribution</p>
</li>
<li>
<p>è€å¹´ä»£è°ƒä¼˜</p>
<p>ä»¥ CMS ä¸ºä¾‹</p>
<p>CMS çš„è€å¹´ä»£å†…å­˜è¶Šå¤§è¶Šå¥½</p>
<p>å…ˆå°è¯•ä¸åšè°ƒä¼˜ï¼Œå¦‚æœæ²¡æœ‰ Full GC é‚£ä¹ˆå·²ç»&hellip;ï¼Œå¦åˆ™å…ˆå°è¯•è°ƒä¼˜æ–°ç”Ÿä»£</p>
<p>è§‚å¯Ÿå‘ç”Ÿ Full GC æ—¶è€å¹´ä»£å†…å­˜å ç”¨ï¼Œå°†è€å¹´ä»£å†…å­˜é¢„è®¾è°ƒå¤§ 1/4 ~ 1/3</p>
<p>-XX:CMSInitiatingOccupancyFraction=percent  ä¸€èˆ¬ç™¾åˆ†ä¹‹75</p>
</li>
</ol>
<p>æ–°ç”Ÿä»£è°ƒå¤§äº†ï¼Œæ¯æ¬¡å›æ”¶çš„å¯¹è±¡ä¸æ˜¯å˜å¤šäº†å—ï¼Ÿ</p>
<p>æ–°ç”Ÿä»£èƒ½å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡å¾ˆå°‘ï¼Œå³ä½¿å‘ç”Ÿå›æ”¶é€Ÿåº¦ä¹Ÿå¾ˆå¿«</p>
<p>æ¡ˆä¾‹1 Full GC å’Œ Minor GCé¢‘ç¹</p>
<p>å¢å¤§äº†æ–°ç”Ÿä»£çš„å†…å­˜å¯¼è‡´minorgcæ›´å°‘å‡ºå‘ï¼Œå¹¶ä¸”survivoråŒºå¢å¤§ï¼Œå°±ä¸ä¼šè®©æœ¬ä¸æ˜¯ç”Ÿå‘½å‘¨æœŸé‚£ä¹ˆé•¿çš„å¯¹è±¡è¿›å…¥è€å¹´åŒºï¼Œä»è€Œç»™è€å¹´åŒºèŠ‚çœç©ºé—´ï¼Œè¿›ä¸€æ­¥å°±å‡å°‘äº†è€å¹´åŒºå‡ºå‘fullGC</p>
<p>æ¡ˆä¾‹2 è¯·æ±‚é«˜å³°æœŸå‘ç”Ÿ Full GCï¼Œå•æ¬¡æš‚åœæ—¶é—´ç‰¹åˆ«é•¿ ï¼ˆCMSï¼‰</p>
<p>cmsé‡æ–°æ ‡è®°çš„æ—¶é—´è¾ƒé•¿ï¼Œä½¿ç”¨ã€-XX:CMSScavengeBeforeRemarkã€‘å‚æ•°å¯ä»¥åšåˆ°åœ¨é‡æ–°æ ‡è®°å‰å…ˆæ‰§è¡Œä¸€æ¬¡æ–°ç”Ÿä»£GCã€‚</p>
<p>æ¡ˆä¾‹3 è€å¹´ä»£å……è£•æƒ…å†µä¸‹ï¼Œå‘ç”Ÿ Full GC ï¼ˆCMS jdk1.7ï¼‰</p>
<h3 id="redisä¸»ä»åŒæ­¥">redisä¸»ä»åŒæ­¥</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="redis_replica_full.png"
        data-srcset="redis_replica_full.png, redis_replica_full.png 1.5x, redis_replica_full.png 2x"
        data-sizes="auto"
        alt="redis_replica_full.png"
        title="redis_replica_full.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="redis_replica_increment.png"
        data-srcset="redis_replica_increment.png, redis_replica_increment.png 1.5x, redis_replica_increment.png 2x"
        data-sizes="auto"
        alt="redis_replica_increment.png"
        title="redis_replica_increment.png" /></p>
<h3 id="redisè„‘è£‚">redisè„‘è£‚</h3>
<p>è„‘è£‚ï¼Œä¸»ä»é›†ç¾¤ä¸­ï¼ŒåŒæ—¶æœ‰ä¸¤ä¸ªä¸»èƒ½æ¥æ”¶å†™è¯·æ±‚ã€‚Redisä¸»ä»åˆ‡æ¢è¿‡ç¨‹ä¸­ï¼Œè‹¥å‘ç”Ÿè„‘è£‚ï¼Œå®¢æˆ·ç«¯æ•°æ®å°±ä¼šå†™å…¥åŸä¸»ï¼Œè‹¥åŸä¸»è¢«é™ä¸ºä»åº“ï¼Œè¿™äº›æ–°å†™å…¥æ•°æ®å°±ä¸¢äº†ã€‚</p>
<p>è„‘è£‚ä¸»è¦æ˜¯å› ä¸ºåŸä¸»åº“å‘ç”Ÿäº†å‡æ•…éšœï¼Œå‡æ•…éšœçš„åŸå› ï¼š</p>
<ul>
<li>å’Œä¸»åº“éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šçš„å…¶ä»–ç¨‹åºä¸´æ—¶å ç”¨äº†å¤§é‡èµ„æºï¼ˆä¾‹å¦‚CPUèµ„æºï¼‰ï¼Œå¯¼è‡´ä¸»åº“èµ„æºä½¿ç”¨å—é™ï¼ŒçŸ­æ—¶é—´å†…æ— æ³•å“åº”å¿ƒè·³ã€‚å…¶å®ƒç¨‹åºä¸å†ä½¿ç”¨èµ„æºæ—¶ï¼Œä¸»åº“åˆæ¢å¤æ­£å¸¸</li>
<li>ä¸»åº“è‡ªèº«é‡åˆ°é˜»å¡ï¼Œå¦‚å¤„ç†bigkeyæˆ–æ˜¯å‘ç”Ÿå†…å­˜swapï¼ˆä½ å¯ä»¥å¤ä¹ ä¸‹ç¬¬19è®²ä¸­æ€»ç»“çš„å¯¼è‡´å®ä¾‹é˜»å¡çš„åŸå› ï¼‰ï¼ŒçŸ­æ—¶é—´å†…æ— æ³•å“åº”å¿ƒè·³ï¼Œç­‰ä¸»åº“é˜»å¡è§£é™¤åï¼Œåˆæ¢å¤æ­£å¸¸çš„è¯·æ±‚å¤„ç†äº†ã€‚</li>
</ul>
<p>åº”å¯¹è„‘è£‚ï¼Œä½ å¯ä»¥åœ¨ä¸»ä»é›†ç¾¤éƒ¨ç½²æ—¶ï¼Œé€šè¿‡åˆç†åœ°é…ç½®å‚æ•°min-slaves-to-writeå’Œmin-slaves-max-lagï¼Œæ¥é¢„é˜²è„‘è£‚ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½ä¼šå› ä¸ºç½‘ç»œæš‚æ—¶æ‹¥å¡å¯¼è‡´ä»åº“æš‚æ—¶å’Œä¸»åº“çš„ACKæ¶ˆæ¯è¶…æ—¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹¶ä¸æ˜¯ä¸»åº“å‡æ•…éšœï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨ç¦æ­¢ä¸»åº“æ¥æ”¶è¯·æ±‚ã€‚</p>
<p>å‡è®¾ä»åº“æœ‰Kä¸ªï¼Œå¯å°†ï¼š</p>
<ul>
<li>min-slaves-to-writeè®¾ç½®ä¸ºK/2+1ï¼ˆå¦‚æœKç­‰äº1ï¼Œå°±è®¾ä¸º1ï¼‰</li>
<li>min-slaves-max-lagè®¾ç½®ä¸ºåå‡ ç§’ï¼ˆä¾‹å¦‚10ï½20sï¼‰</li>
</ul>
<h3 id="synchronized">synchronized</h3>
<p>åå‘é”å‡ºç°åœ¨ï¼ˆå·²è¿‡æ—¶ï¼‰ï¼š
åªæœ‰ä¸€ä¸ªçº¿ç¨‹åŠ é”çš„æƒ…å†µä¸‹ï¼Œæ­¤æ—¶ä¸€å®šæ²¡æœ‰ç«äº‰ï¼æ²¡æœ‰ç«äº‰ï¼æ²¡æœ‰ç«äº‰ï¼
åŠ é”åmarkwordé‡Œå­˜å‚¨æ­¤çº¿ç¨‹åœ°å€ï¼ˆæ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼‰</p>
<p>è½»é‡çº§é”å‡ºç°åœ¨ï¼š
æœ‰ä¸¤ï¼ˆå¤šï¼‰ä¸ªçº¿ç¨‹éƒ½è¯•å›¾å¯¹æ­¤å¯¹è±¡äº¤æ›¿åŠ é”è‰²ï¼Œæ²¡æœ‰ç«äº‰
åŠ é”åmarkwordé‡Œå­˜å‚¨åŠ é”çº¿ç¨‹åœ°å€ï¼ˆjavaçº¿ç¨‹ï¼‰</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="synchronized_thread_0.png"
        data-srcset="synchronized_thread_0.png, synchronized_thread_0.png 1.5x, synchronized_thread_0.png 2x"
        data-sizes="auto"
        alt="synchronized_thread_0.png"
        title="synchronized_thread_0.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="synchronized_thread_1.png"
        data-srcset="synchronized_thread_1.png, synchronized_thread_1.png 1.5x, synchronized_thread_1.png 2x"
        data-sizes="auto"
        alt="synchronized_thread_1.png"
        title="synchronized_thread_1.png" /></p>
<p>é‡é‡çº§é”å‡ºç°åœ¨ï¼š
æœ‰ä¸¤ï¼ˆå¤šï¼‰ä¸ªçº¿ç¨‹éƒ½è¯•å›¾å¯¹æ­¤å¯¹è±¡åŠ é”é…’ï¼Œå¹¶ä¸”å‘ç”Ÿäº†ç«äº‰
åŠ é”åmarkwordé‡Œå­˜å‚¨Monitoråœ°å€</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="synchronized_monitor.png"
        data-srcset="synchronized_monitor.png, synchronized_monitor.png 1.5x, synchronized_monitor.png 2x"
        data-sizes="auto"
        alt="synchronized_monitor.png"
        title="synchronized_monitor.png" /></p>
<p>è‡ªæ—‹å‡ºç°åœ¨é‡é‡çº§é”ä¹‹åï¼š</p>
<p>åªè¦å‘ç”Ÿç«äº‰ï¼Œè½»é‡çº§é”å°±ä¼šå‡çº§ä¸ºé‡é‡çº§é”
å‡çº§ï¼ˆè†¨èƒ€ï¼‰æˆé‡é‡é”ä¹‹åï¼Œæœªè·å¾—é”çš„çº¿ç¨‹ï¼Œä¼šè¿›å…¥_cXq
é“¾è¡¨ï¼Œè‡ªæ—‹å°è¯•è·å–é”
~å¦‚æœè‡ªæ—‹æœŸé—´ï¼Œèƒ½è·å–é”ï¼Œåˆ™é¿å…é˜»å¡
å¦‚æœè‡ªæ—‹è‹¥å¹²æ¬¡ï¼Œä»ä¸èƒ½è·å–é”ï¼Œåˆ™è¿›å…¥é˜»å¡ï¼Œå°†æ¥ç”±æŒé”çº¿ç¨‹å”¤é†’</p>
<h3 id="javaå¯¹è±¡å¤´-markword">javaå¯¹è±¡å¤´ MarkWord</h3>
<p>æ— è®ºæ˜¯åŠ äº†è½»é”è¿˜æ˜¯é‡é”ï¼Œå‰é¢çš„å†…å®¹å°±ä¼šè¢«æ›¿æ¢æ‰ï¼Œä»€ä¹ˆhashç ï¼Œåˆ†ä»£å¹´é¾„éƒ½ä¼šè¢«æ›¿æ¢æ‰ã€‚</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="markword.png"
        data-srcset="markword.png, markword.png 1.5x, markword.png 2x"
        data-sizes="auto"
        alt="markword.png"
        title="markword.png" /></p>
<p>å¯¹è±¡åˆ†ä¸º</p>
<p>å¯¹è±¡å¤´ object header å’Œ  å¯¹è±¡ä½“ object body</p>
<p>object body =æˆå‘˜å˜é‡</p>
<p>object header=Mark Word+Klass Word ï¼ˆç±»å‹æŒ‡é’ˆä¹Ÿå°±æ˜¯ç±»å¯¹è±¡ï¼‰</p>
<p>Mark Word =hashcode+åˆ†ä»£å¹´é¾„ï¼ˆageï¼‰+æ˜¯ä¸æ˜¯åå‘é”ï¼ˆbiased_lockï¼‰+åŠ é”çŠ¶æ€ä½</p>
<p>åŠ é”çŠ¶æ€ä½</p>
<p>01  : æ— é”</p>
<p>00 : è½»é‡é”</p>
<p>10  : é‡é‡çº§é”</p>
<p>Mark Word ä¸­è½»é‡é” å’Œ é‡é‡çº§é”å­˜çš„ä¸œè¥¿æ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<p>è½»é‡çº§ï¼šlockRecord å¯¹è±¡</p>
<p>é‡é‡çº§ï¼šmonitorå¯¹è±¡</p>
<h3 id="æŸ¥çœ‹æ—¥å¿—å‘½ä»¤">æŸ¥çœ‹æ—¥å¿—å‘½ä»¤</h3>
<p>less app.properties | grep comp -C 5</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="log.png"
        data-srcset="log.png, log.png 1.5x, log.png 2x"
        data-sizes="auto"
        alt="log.png"
        title="log.png" /></p>
<h3 id="è¯¥æ€ä¹ˆå¯¹æ¯”é€‰æ‹©mq">è¯¥æ€ä¹ˆå¯¹æ¯”é€‰æ‹©MQ</h3>
<ol>
<li>å¦‚æœæˆ‘ä»¬ä¸šåŠ¡åªæ˜¯æ”¶å‘æ¶ˆæ¯è¿™ç§å•ä¸€ç±»å‹çš„éœ€æ±‚ï¼Œè€Œä¸”å¯ä»¥å…è®¸å°éƒ¨åˆ†æ•°æ®ä¸¢å¤±çš„å¯èƒ½æ€§ï¼Œä½†æ˜¯åˆè¦æ±‚æé«˜çš„ååé‡å’Œé«˜æ€§èƒ½çš„è¯ï¼Œå°±ç›´æ¥é€‰Kafkaå°±è¡Œäº†ï¼Œå°±å¥½æ¯”æˆ‘ä»¬å…¬å¸æƒ³è¦æ”¶é›†å’Œä¼ è¾“ç”¨æˆ·è¡Œä¸ºæ—¥å¿—ä»¥åŠå…¶ä»–ç›¸å…³æ—¥å¿—çš„å¤„ç†ï¼Œå°±é€‰ç”¨çš„Kafkaä¸­é—´ä»¶ã€‚</li>
<li>å¦‚æœè‡ªå·±æ‰€å¤„å…¬å¸ä¸šåŠ¡æ¯”è¾ƒå¹³ç¨³ï¼Œæœªæ¥å‡ å¹´å†…ä¸ä¼šå‡ºç°é£é€Ÿå‘å±•ï¼Œè€Œä¸”æ²¡æœ‰ä»€ä¹ˆæ”¹æºç çš„ç‰¹æ®Šéœ€æ±‚çš„è¯ï¼Œåœ¨é¢å¯¹é€‰æ‹©MQçš„æ—¶å€™å°±å¯ä»¥é€‰ç”¨RabbitMQã€‚æ¯•ç«Ÿå¦‚ä»Šè¿™æ ·çš„ä¸­å°å…¬å¸ä¹Ÿå°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚</li>
<li>å¦‚æœè‡ªå·±æ‰€å¤„å…¬å¸å‘å±•è¿…çŒ›ï¼Œä¸€å¹´ç»å¸¸æä¸€äº›ç‰¹åˆ«å¤§çš„ä¿ƒé”€ç§’æ€æ´»åŠ¨ï¼Œå…¬å¸æŠ€æœ¯æ ˆä¸»è¦æ˜¯Javaè¯­è¨€çš„è¯ï¼Œå°±ç›´æ¥ä¸€æ­¥åˆ°ä½é€‰æ‹©RocketMQï¼Œè¿™æ ·ä¼šçœå¾ˆå¤šäº‹æƒ…ã€‚</li>
</ol>
<p>Kafkaï¼šè¿½æ±‚é«˜ååé‡ï¼Œä¸€å¼€å§‹çš„ç›®çš„å°±æ˜¯ç”¨äºæ—¥å¿—æ”¶é›†å’Œä¼ è¾“ï¼Œ<strong>é€‚åˆäº§ç”Ÿå¤§é‡æ•°æ®çš„äº’è”ç½‘æœåŠ¡çš„æ•°æ®æ”¶é›†ä¸šåŠ¡</strong>ï¼Œå¤§å‹å…¬å¸å»ºè®®å¯ä»¥é€‰ç”¨ï¼Œ<strong>å¦‚æœæœ‰æ—¥å¿—é‡‡é›†åŠŸèƒ½ï¼Œè‚¯å®šæ˜¯é¦–é€‰ kafkaã€‚</strong></p>
<p>RocketMQï¼š<strong>å¤©ç”Ÿä¸ºé‡‘èäº’è”ç½‘é¢†åŸŸè€Œç”Ÿï¼Œå¯¹äºå¯é æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯</strong>ï¼Œå°¤å…¶æ˜¯ç”µå•†é‡Œé¢çš„è®¢å•æ‰£æ¬¾ï¼Œä»¥åŠä¸šåŠ¡å‰Šå³°ï¼Œåœ¨å¤§é‡äº¤æ˜“æ¶Œå…¥æ—¶ï¼Œåç«¯å¯èƒ½æ— æ³•åŠæ—¶å¤„ç†çš„æƒ…å†µã€‚RoketMQ åœ¨ç¨³å®šæ€§ä¸Šå¯èƒ½æ›´å€¼å¾—ä¿¡èµ–ï¼Œè¿™äº›ä¸šåŠ¡åœºæ™¯åœ¨é˜¿é‡ŒåŒ 11 å·²ç»ç»å†äº†å¤šæ¬¡è€ƒéªŒï¼Œ<strong>å¦‚æœä½ çš„ä¸šåŠ¡æœ‰ä¸Šè¿°å¹¶å‘åœºæ™¯ï¼Œå»ºè®®å¯ä»¥é€‰æ‹© RocketMQã€‚</strong></p>
<p>RabbitMQï¼šç»“åˆ erlang è¯­è¨€æœ¬èº«çš„å¹¶å‘ä¼˜åŠ¿ï¼Œæ€§èƒ½è¾ƒå¥½ï¼Œç¤¾åŒºæ´»è·ƒåº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œä½†æ˜¯ä¸åˆ©äºåšäºŒæ¬¡å¼€å‘å’Œç»´æŠ¤ï¼Œä¸è¿‡ RabbitMQ çš„ç¤¾åŒºååˆ†æ´»è·ƒï¼Œå¯ä»¥è§£å†³å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„ bugã€‚<strong>å¦‚æœä½ çš„æ•°æ®é‡æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œå°å…¬å¸ä¼˜å…ˆé€‰æ‹©åŠŸèƒ½æ¯”è¾ƒå®Œå¤‡çš„ RabbitMQã€‚</strong></p>
<p>ä½œè€…ï¼šæ¥¼ä»”
é“¾æ¥ï¼šhttps://juejin.cn/post/7096095180536676365
æ¥æºï¼šç¨€åœŸæ˜é‡‘
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p><a href="https://www.cnblogs.com/lyhsblog/p/16113202.html" target="_blank" rel="noopener noreffer ">https://www.cnblogs.com/lyhsblog/p/16113202.html</a></p>
<h3 id="elasticsearchçš„ç‰¹ç‚¹ä¼˜ç‚¹-ä¸ºä»€ä¹ˆæ¯”mysqlå¿«">Elasticsearchçš„ç‰¹ç‚¹/ä¼˜ç‚¹ ä¸ºä»€ä¹ˆæ¯”MySQLå¿«ï¼Ÿ</h3>
<p>Elasticsearchä¼šå¯¹æ‰€æœ‰è¾“å…¥çš„æ–‡æœ¬è¿›è¡Œå¤„ç†ï¼Œå»ºç«‹ç´¢å¼•æ”¾å…¥å†…å­˜ä¸­ï¼Œä»è€Œæé«˜æœç´¢æ•ˆç‡ã€‚åœ¨è¿™ä¸€ç‚¹ä¸ŠESè¦ä¼˜äºMySQLçš„B+æ ‘çš„ç»“æ„ï¼ŒMySQLéœ€è¦å°†ç´¢å¼•æ”¾å…¥ç£ç›˜ï¼Œæ¯æ¬¡è¯»å–éœ€è¦å…ˆä»ç£ç›˜è¯»å–ç´¢å¼•ç„¶åå¯»æ‰¾å¯¹åº”çš„æ•°æ®èŠ‚ç‚¹ï¼Œä½†æ˜¯ESèƒ½å¤Ÿç›´æ¥åœ¨å†…å­˜ä¸­å°±æ‰¾åˆ°ç›®æ ‡æ–‡æ¡£å¯¹åº”çš„å¤§è‡´ä½ç½®ï¼Œæœ€å¤§åŒ–æé«˜æ•ˆç‡ã€‚ å¹¶ä¸”åœ¨è¿›è¡Œç»„åˆæŸ¥è¯¢çš„æ—¶å€™MySQLçš„åŠ£åŠ¿æ›´åŠ æ˜æ˜¾ï¼Œå®ƒä¸æ”¯æŒå¤æ‚çš„ç»„åˆæŸ¥è¯¢æ¯”å¦‚èšåˆæ“ä½œï¼Œå³ä½¿è¦ç»„åˆæŸ¥è¯¢ä¹Ÿè¦äº‹å…ˆå»ºå¥½ç´¢å¼•ï¼Œä½†æ˜¯ESå°±å¯ä»¥å®Œæˆè¿™ç§å¤æ‚çš„æ“ä½œï¼Œé»˜è®¤æ¯ä¸ªå­—æ®µéƒ½æ˜¯æœ‰ç´¢å¼•çš„ï¼Œåœ¨æŸ¥è¯¢çš„æ—¶å€™å¯ä»¥å„ç§äº’ç›¸ç»„åˆã€‚</p>
<p>å¯¹æ¯”ï¼š 1ï¼‰åŸºäºåˆ†è¯åçš„å…¨æ–‡æ£€ç´¢ï¼šä¾‹å¦‚select * from test where name like &lsquo;%å¼ ä¸‰%&rsquo;ï¼Œå¯¹äºmysqlæ¥è¯´ï¼Œå› ä¸ºç´¢å¼•å¤±æ•ˆï¼Œä¼šè¿›è¡Œå…¨è¡¨æ£€ç´¢ï¼›å¯¹esè€Œè¨€åˆ†è¯åï¼Œæ¯ä¸ªå­—éƒ½å¯ä»¥åˆ©ç”¨FSTé«˜é€Ÿæ‰¾åˆ°å€’æ’ç´¢å¼•çš„ä½ç½®ï¼Œå¹¶è¿…é€Ÿè·å–æ–‡æ¡£idåˆ—è¡¨ï¼Œå¤§å¤§çš„æå‡äº†æ€§èƒ½ï¼Œå‡å°‘äº†ç£ç›˜IOã€‚ 2ï¼‰ç²¾ç¡®æ£€ç´¢ï¼šè¿›è¡Œç²¾ç¡®æ£€ç´¢ï¼Œæœ‰äº›æ—¶å€™å¯èƒ½mysqlè¦å¿«ä¸€äº›ï¼Œå½“mysqlçš„éèšåˆç´¢å¼•å¼•ç”¨ä¸Šäº†èšåˆç´¢å¼•ï¼Œæ— éœ€å›è¡¨ï¼Œåˆ™é€Ÿåº¦ä¸Šå¯èƒ½æ›´å¿«ï¼›esè¿˜æ˜¯é€šè¿‡FSTæ‰¾åˆ°å€’æ’ç´¢å¼•çš„ä½ç½®æ¯”è·å–æ–‡æ¡£idåˆ—è¡¨ï¼Œå†æ ¹æ®æ–‡æ¡£idè·å–æ–‡æ¡£å¹¶æ ¹æ®ç›¸å…³åº¦è¿›è¡Œæ’åºã€‚ä½†æ˜¯esè¿˜æœ‰ä¸ªä¼˜åŠ¿ï¼Œå°±æ˜¯eså³å¤©ç„¶çš„åˆ†å¸ƒå¼èƒ½å¤Ÿåœ¨å¤§é‡æ•°æ®æœç´¢æ—¶å¯ä»¥é€šè¿‡åˆ†ç‰‡é™ä½æ£€ç´¢è§„æ¨¡ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å¹¶è¡Œæ£€ç´¢æå‡æ•ˆç‡ï¼Œç”¨filteræ—¶ï¼Œæ›´æ˜¯å¯ä»¥ç›´æ¥è·³è¿‡æ£€ç´¢ç›´æ¥èµ°ç¼“å­˜ã€‚</p>
<p><a href="https://www.51cto.com/article/646093.html" target="_blank" rel="noopener noreffer ">https://www.51cto.com/article/646093.html</a></p>
<p>ä½œè€…ï¼šé”¥æ —
é“¾æ¥ï¼šhttps://juejin.cn/post/6998411731210879012
æ¥æºï¼šç¨€åœŸæ˜é‡‘
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¯´mysqlå•è¡¨è¡Œæ•°ä¸è¦è¶…è¿‡2000w">ä¸ºä»€ä¹ˆè¯´MySQLå•è¡¨è¡Œæ•°ä¸è¦è¶…è¿‡2000w?</h3>
<ol>
<li>Mysql çš„è¡¨æ•°æ®æ˜¯ä»¥é¡µçš„å½¢å¼å­˜æ”¾çš„ï¼Œé¡µåœ¨ç£ç›˜ä¸­ä¸ä¸€å®šæ˜¯è¿ç»­çš„ã€‚</li>
<li>é¡µçš„ç©ºé—´æ˜¯ 16K, å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç©ºé—´éƒ½æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®çš„ï¼Œä¼šæœ‰ä¸€äº›å›ºå®šçš„ä¿¡æ¯ï¼Œå¦‚ï¼Œé¡µå¤´ï¼Œé¡µå°¾ï¼Œé¡µç ï¼Œæ ¡éªŒç ç­‰ç­‰ã€‚</li>
<li>åœ¨ B+ æ ‘ä¸­ï¼Œå¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹çš„æ•°æ®ç»“æ„æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«åœ¨äºï¼Œå¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯å®é™…çš„è¡Œæ•°æ®ï¼Œè€Œéå¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯ä¸»é”®å’Œé¡µå·ã€‚</li>
<li>ç´¢å¼•ç»“æ„ä¸ä¼šå½±å“å•è¡¨æœ€å¤§è¡Œæ•°ï¼Œ2kw ä¹Ÿåªæ˜¯æ¨èå€¼ï¼Œè¶…è¿‡äº†è¿™ä¸ªå€¼å¯èƒ½ä¼šå¯¼è‡´ B + æ ‘å±‚çº§æ›´é«˜ï¼Œå½±å“æŸ¥è¯¢æ€§èƒ½</li>
</ol>
<h3 id="concurrenthashmap">ConcurrentHashMap</h3>
<p>æ‰©å®¹</p>
<h4 id="putæ–¹æ³•">putæ–¹æ³•</h4>
<p>å¦‚æœtableéƒ½æ²¡åˆå§‹åŒ–ï¼Œä¼šè°ƒç”¨initTable() CASå®ç°</p>
<p>å¦‚æœæ¡¶ä¸‹æ ‡å¤´èŠ‚ç‚¹æ˜¯ç©ºï¼Œä¼šç”¨casæ·»åŠ å¤´å…ƒç´ </p>
<p>å¦‚æœå‘ç°å½“å‰æ¡¶ä¸‹æ ‡ä»£è¡¨æ‰©å®¹ï¼Œå°±ä¼šå»å¸®åŠ©æ‰©å®¹ å¦‚æœæ˜¯è¿ç§»ä¹‹å‰çš„ä¸‹æ ‡åŒºé—´ï¼Œå¯ä»¥ç›´æ¥putï¼Œå¦‚æœæ˜¯æ•°ç»„ä¸‹æ ‡æ­£åœ¨è¿ç§»åªèƒ½é˜»å¡ï¼Œå¦‚æœè®¿é—®äº†å¤„ç†å®Œæˆçš„é“¾è¡¨å¯ä»¥å¸®å¿™æ‰©å®¹</p>
<p>å¦‚æœé€šä¸‹æ ‡å¤´èŠ‚ç‚¹ä¸æ˜¯ç©º, ç”¨synchronizedå…³é”®è¯åŠ é” ï¼Œåªå¯¹å½“å‰é“¾è¡¨çš„å¤´èŠ‚ç‚¹åŠ é”ï¼Œkeyç›¸åŒè¦†ç›–ï¼Œæ²¡æœ‰æ‰¾åˆ°è¿½åŠ åˆ°é“¾è¡¨æœ€åï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘æŒ‰ç…§çº¢é»‘æ ‘çš„æ·»åŠ é€»è¾‘</p>
<h4 id="transferæ–¹æ³•">transferæ–¹æ³•</h4>
<p>å…ƒç´ ä¸ªæ•°&gt;=3/4çš„capacityæ—¶å°±ä¼šæ‰©å®¹</p>
<p>capacity  å¹¶ä¸æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœcapacity  æ˜¯16ï¼Œfactor  =3/4 .åˆ™æ˜¯ æ•°ç»„é•¿åº¦æ˜¯32ï¼Œå› ä¸º32çš„3/4æ˜¯24 ï¼Œ16å°äº24ï¼Œæ‰€ä»¥capacity  =16 ï¼Œ æ•°ç»„é•¿åº¦32æ»¡è¶³</p>
<p>factor  æ‰©å®¹å› å­ é»˜è®¤0.75ï¼Œåªæ˜¯ç¬¬ä¸€æ¬¡æ„é€ ä¸­ä¼šç”¨åˆ°ï¼Œä»¥åéƒ½æ˜¯æŒ‰ç…§3/4æ‰©å®¹ï¼Œå¦‚æœfactorä¸æ˜¯3/4çš„è¯</p>
<h3 id="é¡¹ç›®äº®ç‚¹">é¡¹ç›®äº®ç‚¹</h3>
<p>1.å¼•å…¥äº†rokcetmqï¼Œå°†å¤æ‚çš„ä¸šåŠ¡ä»»åŠ¡æ­¥éª¤è§£è€¦ï¼Œä¹Ÿå°†ä¸€äº›è€—æ—¶è€—cpuå†…å­˜çš„æ­¥éª¤ç‹¬ç«‹åˆ°æŸä¸€ä¸ªtopicæ–¹æ³•åç»­èŠ‚ç‚¹æ‰©å±•</p>
<p>2.å¼•å…¥äº†å¼‚æ­¥çº¿ç¨‹æ± å»å¤„ç†ä»»åŠ¡ï¼Œ</p>
<p>3.ä¼˜åŒ–æ•°æ®åº“æ…¢sql</p>
<p>4.å¼€äº†ä¸€ä¸ªæ—¥å¿—æ¨¡å—çš„starterç»„ä»¶ç»™å…¶ä»–çš„é¡¹ç›®ä¸­ä½¿ç”¨</p>
<p>5ï¼Œä¸å…¶ä»–éƒ¨é—¨æ¥å£è¿›è¡Œapiè”è°ƒæµ‹è¯•</p>
<p>6ï¼Œå¯¹ä¸€äº›è§†é¢‘æ–‡ä»¶é¢„å¤„ç†è¿›è¡Œäº†è°ƒç ”ï¼Œé€‰æ‹©äº†jave2é™ä½äº† ffmepgçš„ éƒ¨ç½²å¤æ‚åº¦</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-08-03</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://shengtu0328.github.io/posts/interview_questions/" data-title="Interview_questions"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://shengtu0328.github.io/posts/interview_questions/"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://shengtu0328.github.io/posts/interview_questions/" data-title="Interview_questions"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://shengtu0328.github.io/posts/interview_questions/" data-title="Interview_questions"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on å¾®åš" data-sharer="weibo" data-url="https://shengtu0328.github.io/posts/interview_questions/" data-title="Interview_questions"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/english_writing_daily_003/" class="prev" rel="prev" title="English_writing_daily_003"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>English_writing_daily_003</a>
            <a href="/posts/spring_session/" class="next" rel="next" title="Spring_session">Spring_session<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.105.0-DEV">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">ricky</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
